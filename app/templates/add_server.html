{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h1>Добавить инстанс</h1>
    {% if error %}
      <div class="alert alert-error">{{ error }}</div>
    {% endif %}
    <form method="post" action="/ui/servers/add">
      <div class="grid">
        <label>Название
          <input type="text" name="name" required placeholder="My Server #1">
        </label>
        <label>IP / Host
          <input type="text" name="host" required placeholder="203.0.113.10">
        </label>
        <label>SSH порт
          <input type="number" name="ssh_port" value="22">
        </label>
        <label>SSH пользователь
          <input type="text" name="ssh_user" value="root">
        </label>

        <label>Auth method
          <select name="auth_method">
            <option value="key" selected>SSH key</option>
            <option value="password">Password</option>
          </select>
        </label>

        <label>SSH пароль (если password)
          <input type="password" name="ssh_password">
        </label>

        <label>SSH private key (если key)
          <textarea name="ssh_private_key" rows="8" placeholder="-----BEGIN OPENSSH PRIVATE KEY-----"></textarea>
        </label>

        <label>Passphrase (если ключ зашифрован)
          <input type="password" name="ssh_private_key_passphrase">
        </label>

        <label>Remote scheme
          <select name="remote_scheme">
            <option value="http" selected>http</option>
            <option value="https">https</option>
          </select>
        </label>

        <label>Web UI port (TCP)
          <input type="number" name="web_ui_port" value="8080">
        </label>

        <label>WG port (UDP)
          <input type="number" name="wg_port" value="51820">
        </label>

        <label>NGINX user
          <input type="text" name="nginx_user" value="admin">
        </label>

        <label>NGINX password (optional)
          <input type="password" name="nginx_password" placeholder="если пусто — сгенерируем">
        </label>
      </div>

      <label class="checkbox">
        <input type="checkbox" name="deploy_now" value="true">
        Сразу задеплоить контейнер (docker compose up -d)
      </label>

      <div class="row">
        <button type="submit">Добавить</button>
        <a class="button button-secondary" href="/ui/servers">Отмена</a>
      </div>
    </form>
  </div>
{% endblock %}
